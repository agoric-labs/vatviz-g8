<!DOCTYPE html>
<head>
  <title>vatViz - visualization of SwingSet vat logs</title>
  <script type="module" src="js/app.js"></script>
  <script src="//d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
  <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
  <style>
    .graph {
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>vatViz - visualization of SwingSet vat logs</h1>
  <section id="ui">
    <noscript>Try turning on JavaScript?</noscript>
  </section>
  <div id="graph" style="text-align: left"></div>
  <script>
    const graphviz = d3.select('#graph').graphviz();
    // graphviz.engine('twopi');
    globalThis.renderDot = dot => graphviz.renderDot(dot);
    renderDot('digraph  {a -> b}');
  </script>
  <section id="ui"></section>
  <section>
    <h2>Annotations</h2>
    <textarea name="annotations">
{
    "vats": {
        "v1": "bootstrap",
        "v2": "vatAdmin",
        "v3": "comms",
        "v4": "mailbox",
        "v5": "timer",
        "v6": "zoe",
        "v7": "board",
        "v8": "chainStorage",
        "v9": "centralSupply",
        "v10": "mintHolder: USDC_axl",
        "v11": "mintHolder: AUSD",
        "v12": "psmCharter",
        "v13": "committee.econ",
        "v14": "mintHolder: BLD",
        "v15": "bank",
        "v16": "walletFactory",
        "v17": "governor: PSM(USDC_axl)",
        "v18": "governor: PSM(AUSD)",
        "v19": "governor: ?",
        "v20": "PSM(USDC_axl)",
        "v21": "PSM(AUSD)",
        "v22": "provisionPool"
    },
    "exports": {
        "v1": {
            "ko21": "bootstrap*",
            "ko124": "bridgeManager",
            "ko135": "agoricNames",
            "ko280": "namesByAddressAdmin"
        },
        "v2": {
            "ko20": "vatAdmin*",
            "ko27": "vatAdminSvc",
            "ko34": "adminNode.34 v??",
            "ko35": "adminNode.35 v??"
        },
        "v5": {
            "ko23": "timer*",
            "ko29": "timerService"
        },
        "v6": {
            "ko30": "zoe*",
            "ko36": "feeMintAccess",
            "ko37": "zoeService",
            "ko40": "IST Issuer",
            "ko41": "Installation.41??",
            "ko42": "Installation: mintHolder",
            "ko43": "Installation.43??",
            "ko44": "Installation.44??",
            "ko45": "Installation.45??",
            "ko46": "Installation.46??",
            "ko47": "Installation.47??",
            "ko48": "Installation.48??",
            "ko49": "Installation.49??",
            "ko57": "IST brand",
            "ko58": "Invitation issuer",
            "ko71": "Instance.71??",
            "ko72": "zcfAdmin: mintHolder AUSD",
            "ko73": "Instance: mintHolder AUSD",
            "ko74": "zcfAdmin: psmCharter",
            "ko75": "Instance.75??",
            "ko85": "adminFacet.85??",
            "ko87": "adminFacet.87??",
            "ko88": "emptyPublicFacet.88",
            "ko96": "Instance.96??",
            "ko104": "Invitation.104??",
            "ko106": "IST payment.106",
            "ko110": "emptyPublicFacet.110",
            "ko115": "zcfAdmin: mintHolder BLD",
            "ko116": "Instance: mintHolder BLD",
            "ko133": "Invitation.133??",
            "ko134": "Invitation.134??",
            "ko139": "Invitation brand",
            "ko144": "zcfAdmin: walletFactory",
            "ko145": "InstanceH.145",
            "ko160": "zcfAdmin: v17",
            "ko161": "Instance.161??",
            "ko166": "Invitation.166??",
            "ko175": "zcfAdmin.175",
            "ko176": "Instance.176??",
            "ko178": "InstanceH.178",
            "ko181": "IST ZoeMint",
            "ko273": "adminFacet.273??"
        },
        "v7": {
            "ko31": "board*",
            "ko38": "board",
            "ko51": "boardSerializer",
            "ko151": "board readonly marshaller"
        },
        "v8": {
            "ko32": "chainStorage*",
            "ko39": "published??",
            "ko50": "published.agoricNames",
            "ko52": "published.committee",
            "ko53": "node.53??",
            "ko59": "node.59??",
            "ko132": "node.132??",
            "ko142": "published.psm",
            "ko149": "node.149??"
        },
        "v9": {
            "ko60": "zcf.9"
        },
        "v10": {
            "ko76": "USDC_axl mint",
            "ko78": "USDC_axl issuer",
            "ko90": "USDC_axl brand"
        },
        "v11": {
            "ko79": "AUSD mint",
            "ko81": "AUSD issuer",
            "ko91": "AUSD brand",
            "ko128": "AUSD Purse.128",
            "ko278": "AUSD Purse.278"
        },
        "v12": {
            "ko82": "psmCharterCreatorFacet"
        },
        "v13": {
            "ko100": "econ cttee creatorFacet",
            "ko102": "econ cttee publicFacet",
            "ko129": "InvitationH.129",
            "ko130": "InvitationH.130",
            "ko165": "InvitationH.165",
            "ko249": "questionPoser.249",
            "ko253": "econ cttee questionPoser.253"
        },
        "v14": {
            "ko117": "BLD mint",
            "ko119": "BLD issuer",
            "ko121": "BLD brand"
        },
        "v15": {
            "ko122": "bank*",
            "ko125": "bankHandler",
            "ko126": "bankManager",
            "ko164": "bank",
            "ko226": "Asset Subscription",
            "ko230": "SubscriptionIterator.230",
            "ko231": "Virtual Purse.231",
            "ko260": "Virtual Purse.260",
            "ko271": "notifier.271",
            "ko279": "notifier.279",
            "ko282": "Virtual Purse.282",
            "ko284": "notifier.284"
        },
        "v16": {
            "ko146": "walletActionHandler",
            "ko152": "walletFactoryCreator"
        },
        "v17": {
            "ko264": "psmGovernorFacet(USDC_axl)"
        },
        "v19": {
            "ko261": "gov. creatorFacet.261"
        },
        "v21": {
            "ko150": "published.psm.IST.AUSD",
            "ko222": "PSM(AUSD) governorFacet",
            "ko224": "PSM(AUSD) public or limited? .224",
            "ko236": "PSM(AUSD) public or limited? .236",
            "ko237": "PSM(AUSD) paramRetriever.237",
            "ko241": "PSM(AUSD) param manager",
            "ko258": "PSM(AUSD) paramRetriever.258",
            "ko259": "PSM(AUSD) paramRetriever.259"
        },
        "v22": {
            "ko216": "provisionPool governorFacet",
            "ko217": "handleOffer.217",
            "ko232": "ProvisionPool creator",
            "ko281": "provisioningHandler"
        }
    }
}
    </textarea>
  </section>
</body>
