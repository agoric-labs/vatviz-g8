<!DOCTYPE html>
<head>
  <title>vatViz - visualization of SwingSet vat logs</title>
  <script type="module" src="js/app.js"></script>
  <script src="//d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
  <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
  <style>
    .graph {
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>vatViz - visualization of SwingSet vat logs</h1>
  <section id="ui">
    <noscript>Try turning on JavaScript?</noscript>
  </section>
  <div id="graph" style="text-align: left"></div>
  <script>
    const graphviz = d3.select('#graph').graphviz();
    // graphviz.engine('twopi');
    globalThis.renderDot = dot => graphviz.renderDot(dot);
    renderDot('digraph  {a -> b}');
  </script>
  <section id="ui"></section>
  <section>
    <h2>Annotations</h2>
    <textarea name="annotations">
{
    "vats": {
        "v1": "bootstrap",
        "v2": "vatAdmin",
        "v3": "comms",
        "v4": "mailbox",
        "v5": "timer",
        "v6": "zoe",
        "v7": "board",
        "v8": "chainStorage",
        "v9": "centralSupply",
        "v10": "mintHolder: USDC_axl",
        "v11": "mintHolder: AUSD",
        "v12": "psmCharter",
        "v13": "committee.econ",
        "v14": "mintHolder: BLD",
        "v15": "bank",
        "v16": "walletFactory",
        "v17": "contractGovernor: ?",
        "v18": "contractGovernor: ?",
        "v19": "contractGovernor: ?",
        "v20": "PSM: USDC_axl",
        "v21": "PSM: AUSD",
        "v22": "provisionPool"
    },
    "objects": {
        "ko20": "vatAdmin*",
        "ko21": "bootstrap*",
        "ko23": "timer*"
    },
    "exports": {
        "v2": {
            "ko27": "vatAdminSvc"
        },
        "v6": {
            "ko30": "zoe*",
            "ko37": "zoe",
            "ko40": "IST Issuer",
            "ko41": "Installation 41?",
            "ko42": "Installation 42?",
            "ko43": "Installation 43?",
            "ko44": "Installation 44?",
            "ko45": "Installation 45?",
            "ko46": "Installation 46?",
            "ko47": "Installation 47?",
            "ko48": "Installation 48?",
            "ko49": "Installation 49?"
        },
        "v7": {
            "ko31": "board*",
            "ko38": "board"
        },
        "v8": {
            "ko32": "chainStorage*"
        }
    }
}
    </textarea>
  </section>
</body>
